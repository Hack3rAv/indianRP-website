<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create Thread | Indian Roleplay Forum</title>

    <!-- CORE STYLES -->
    <link rel="stylesheet" href="/assets/css/core.css" />
    <link rel="stylesheet" href="/assets/css/layout.css" />
    <link rel="stylesheet" href="/assets/css/components.css" />
    <link rel="stylesheet" href="/assets/css/forum.css" />
</head>
<body>

<header>
    <div class="nav-container">
        <div class="logo">INDIAN <span>RP</span></div>

        <nav>
            <ul class="nav-links">
                <li><a href="/index.html">HOME</a></li>
                <li><a href="/pages/forum/index.html" class="active">FORUM</a></li>
            </ul>
        </nav>
    </div>
</header>

<main id="app-content">

<section class="forum-new">
<div class="container">

    <h1>Create New Thread</h1>

    <!-- CATEGORY -->
    <div class="form-group">
        <label>Category</label>
        <select id="threadType">
            <option value="">Select category</option>
            <option value="support">Support</option>
            <option value="application">Application</option>
            <option value="appeal">Appeal</option>
            <option value="discussion">General Discussion</option>
        </select>
    </div>

    <!-- TITLE -->
    <div class="form-group">
        <label>Title</label>
        <input type="text" id="threadTitle" placeholder="Enter thread title">
    </div>

    <!-- MESSAGE -->
    <div class="form-group">
        <label>Message</label>
        <textarea id="threadContent" placeholder="Write your message here..."></textarea>
    </div>

    <!-- SUBMIT -->
    <button class="btn-mega" id="submitThread">
        SUBMIT THREAD
    </button>

    <p class="reply-note" style="opacity:.6">
        ⚠️ DEV MODE: authentication temporarily bypassed for testing.
    </p>

</div>
</section>

</main>

<script>
document.getElementById("submitThread").addEventListener("click", async () => {

    const title = document.getElementById("threadTitle").value.trim();
    const content = document.getElementById("threadContent").value.trim();
    const type = document.getElementById("threadType").value;

    if (!title || !content || !type) {
        alert("Please fill all fields");
        return;
    }

    const res = await fetch("http://localhost:3000/api/forum/thread", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
       body: JSON.stringify({
            title,
            content,
            type
        })

    });

    const data = await res.json();

    if (data.success) {
        alert("Thread created successfully");
        window.location.href = "/pages/forum/index.html";
    } else {
        alert("Failed to create thread");
    }
});
</script>

</body>
</html>
